<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Package: google.golang.org/grpc/xds/internal/balancer/weightedtarget</title>
<link href="../../../../../../css/light-v0.3.6.css" rel="stylesheet">
<script src="../../../../../../jvs/golds-v0.3.6.js"></script>
<body onload="onPageLoad()"><div>

<pre id="package-details"><code><span style="font-size:xx-large;">package <b>weightedtarget</b></span>

<span class="title">Import Path</span>
	<a href="../../../../../../index.html#pkg-google.golang.org/grpc/xds/internal/balancer/weightedtarget">google.golang.org/grpc/xds/internal/balancer/weightedtarget</a><i> (on <a href="https://pkg.go.dev/google.golang.org/grpc/xds/internal/balancer/weightedtarget" target="_blank">go.dev</a>)</i>

<span class="title">Dependency Relation</span>
	imports <a href="../../../../../../dep/google.golang.org/grpc/xds/internal/balancer/weightedtarget.html">13 packages</a>, and imported by <a href="../../../../../../dep/google.golang.org/grpc/xds/internal/balancer/weightedtarget.html#imported-by">2 packages</a>

<div id="files"><span class="title">Involved Source Files</span>

	<span class="nodocs">      <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/logging.go.html">logging.go</a></span>
	<input type='checkbox' checked class="fold" id="file-1-fold-content"><label for="file-1-fold-content">   <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#doc">#d</a> <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html">weightedtarget.go</a></label><span id='file-1-fold-content-items' class="fold-items">
		Package weightedtarget implements the weighted_target balancer.
</span>
	<span class="nodocs">      <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget_config.go.html">weightedtarget_config.go</a></span></div>
<div id="exported-types"><span class="title">Package-Level Type Names<span class="title-stat"><i> (total 4, in which 2 are exported)</i></span></span>

<div id="exported-types-buttons" class="js-on">	/* sort exporteds by: <label id="sort-types-by-alphabet" class="button">alphabet</label> | <label id="sort-types-by-popularity" class="button">popularity</label> */</div><div class="anchor type-res" id="name-LBConfig" data-popularity="250">	<input type='checkbox' class="fold" id="LBConfig-fold-content"><label for="LBConfig-fold-content"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget_config.go.html#line-37">LBConfig</a> <i>(struct)</i></label><span id='LBConfig-fold-content-docs' class="fold-docs">
		LBConfig is the balancer config for weighted_target.

		<input type='checkbox' class="fold" id="LBConfig-fold-fields"><label for="LBConfig-fold-fields">Fields (<i>total 2, both are exported</i>)</label><span id='LBConfig-fold-fields-items' class="fold-items"><span>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget_config.go.html#line-38">LoadBalancingConfig</a> <i><a href="../../../serviceconfig.html">serviceconfig</a>.<a href="../../../serviceconfig.html#name-LoadBalancingConfig">LoadBalancingConfig</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget_config.go.html#line-40">Targets</a> <i>map[<a href="../../../../../builtin.html#name-string">string</a>]<a href="#name-Target">Target</a></i></span></span></span>
		<input type='checkbox' class="fold" id="LBConfig-fold-methods"><label for="LBConfig-fold-methods">Methods (<i>only one, which is unexported</i>)</label><span id='LBConfig-fold-methods-items' class="fold-items">
			<input type='checkbox' class="showhide" id="LBConfig-showhide-methods"><i><label for="LBConfig-showhide-methods" class="show-inline">/* one unexported ... */</label><label for="LBConfig-showhide-methods" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<span class="nodocs">( T) <a href="../../../../../../src/google.golang.org/grpc/serviceconfig/serviceconfig.go.html#line-36">isLoadBalancingConfig</a>()</span></i></span></span>
		<input type='checkbox' class="fold" id="LBConfig-fold-impls"><label for="LBConfig-fold-impls">Implements (<i>at least one exported</i>)</label><span id='LBConfig-fold-impls-items' class="fold-items"><span>
			 T : google.golang.org/grpc/serviceconfig.<a href="../../../serviceconfig.html#name-LoadBalancingConfig">LoadBalancingConfig</a></span></span>
		<input type='checkbox' class="fold" id="LBConfig-fold-results"><label for="LBConfig-fold-results">As Outputs Of (<i>at least 2, neither is exported</i>)</label><span id='LBConfig-fold-results-items' class="fold-items">
			<input type='checkbox' class="showhide" id="LBConfig-showhide-inputofs"><i><label for="LBConfig-showhide-inputofs" class="show-inline">/* 2+ unexporteds ... */</label><label for="LBConfig-showhide-inputofs" class="hide-inline">/* 2+ unexporteds: */</label></i><span class="hidden"><i>
			func <a href="#name-parseConfig">parseConfig</a>(c <a href="../../../../../encoding/json.html">json</a>.<a href="../../../../../encoding/json.html#name-RawMessage">RawMessage</a>) (*<b>LBConfig</b>, <a href="../../../../../builtin.html#name-error">error</a>)</i></span><span class="hidden"><i>
			func google.golang.org/grpc/xds/internal/balancer/clusterresolver.<a href="clusterresolver.html#name-localitiesToWeightedTarget">localitiesToWeightedTarget</a>(localities []<a href="../xdsclient.html">xdsclient</a>.<a href="../xdsclient.html#name-Locality">Locality</a>, priorityName <a href="../../../../../builtin.html#name-string">string</a>, childPolicy *<a href="../../../internal/serviceconfig.html">internalserviceconfig</a>.<a href="../../../internal/serviceconfig.html#name-BalancerConfig">BalancerConfig</a>) (*<b>LBConfig</b>, []<a href="../../../resolver.html">resolver</a>.<a href="../../../resolver.html#name-Address">Address</a>)</i></span></span>

</span></div><div class="anchor type-res" id="name-Target" data-popularity="0">	<input type='checkbox' class="fold" id="Target-fold-content"><label for="Target-fold-content"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget_config.go.html#line-29">Target</a> <i>(struct)</i></label><span id='Target-fold-content-docs' class="fold-docs">
		Target represents one target with the weight and the child policy.

		<input type='checkbox' class="fold" id="Target-fold-fields"><label for="Target-fold-fields">Fields (<i>total 2, both are exported</i>)</label><span id='Target-fold-fields-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="Target-fold-field-ChildPolicy"><label for="Target-fold-field-ChildPolicy"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget_config.go.html#line-33">ChildPolicy</a> <i>*<a href="../../../internal/serviceconfig.html">internalserviceconfig</a>.<a href="../../../internal/serviceconfig.html#name-BalancerConfig">BalancerConfig</a></i></label><span id='Target-fold-field-ChildPolicy-docs' class="fold-docs">
				ChildPolicy is the child policy and it's config.
</span></span><span>
			<input type='checkbox' class="fold" id="Target-fold-field-Weight"><label for="Target-fold-field-Weight"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget_config.go.html#line-31">Weight</a> <i><a href="../../../../../builtin.html#name-uint32">uint32</a></i></label><span id='Target-fold-field-Weight-docs' class="fold-docs">
				Weight is the weight of the child policy.
</span></span></span>

</span></div></div><div>	<input type='checkbox' class="showhide" id="unexported-typenames-showhide"><i><label for="unexported-typenames-showhide" class="show-inline">/* 2 unexporteds ... */</label><label for="unexported-typenames-showhide" class="hide-inline">/* 2 unexporteds: */</label></i><div class="anchor type-res hidden" id="name-bb" data-popularity="250">	<input type='checkbox' class="fold" id="bb-fold-content"><label for="bb-fold-content"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-48">bb</a> <i>(struct)</i></label><span id='bb-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="bb-fold-methods"><label for="bb-fold-methods">Methods (<i>total 3, all are exported</i>)</label><span id='bb-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">( T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-50">Build</a>(cc <a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-ClientConn">ClientConn</a>, bOpts <a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-BuildOptions">BuildOptions</a>) <a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-Balancer">Balancer</a></span></span><span>
			<span class="nodocs">( T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-61">Name</a>() <a href="../../../../../builtin.html#name-string">string</a></span></span><span>
			<span class="nodocs">( T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-65">ParseConfig</a>(c <a href="../../../../../encoding/json.html">json</a>.<a href="../../../../../encoding/json.html#name-RawMessage">RawMessage</a>) (<a href="../../../serviceconfig.html">serviceconfig</a>.<a href="../../../serviceconfig.html#name-LoadBalancingConfig">LoadBalancingConfig</a>, <a href="../../../../../builtin.html#name-error">error</a>)</span></span></span>
		<input type='checkbox' class="fold" id="bb-fold-impls"><label for="bb-fold-impls">Implements (<i>at least 2, both are exported</i>)</label><span id='bb-fold-impls-items' class="fold-items"><span>
			 T : google.golang.org/grpc/balancer.<a href="../../../balancer.html#name-Builder">Builder</a></span><span>
			 T : google.golang.org/grpc/balancer.<a href="../../../balancer.html#name-ConfigParser">ConfigParser</a></span></span>

</span></div><div class="anchor type-res hidden" id="name-weightedTargetBalancer" data-popularity="385">	<input type='checkbox' class="fold" id="weightedTargetBalancer-fold-content"><label for="weightedTargetBalancer-fold-content"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-69">weightedTargetBalancer</a> <i>(struct)</i></label><span id='weightedTargetBalancer-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="weightedTargetBalancer-fold-fields"><label for="weightedTargetBalancer-fold-fields">Fields (<i>total 4, none are exported</i>)</label><span id='weightedTargetBalancer-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="weightedTargetBalancer-showhide-fields"><i><label for="weightedTargetBalancer-showhide-fields" class="show-inline">/* 4 unexporteds ... */</label><label for="weightedTargetBalancer-showhide-fields" class="hide-inline">/* 4 unexporteds: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="weightedTargetBalancer-fold-field-bg"><label for="weightedTargetBalancer-fold-field-bg"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-77">bg</a> <i>*<a href="balancergroup.html">balancergroup</a>.<a href="balancergroup.html#name-BalancerGroup">BalancerGroup</a></i></label><span id='weightedTargetBalancer-fold-field-bg-docs' class="fold-docs">
				TODO: Make this package not dependent on any xds specific code.
				BalancerGroup uses xdsinternal.LocalityID as the key in the map of child
				policies that it maintains and reports load using LRS. Once these two
				dependencies are removed from the balancerGroup, this package will not
				have any dependencies on xds code.
</span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-70">logger</a> <i>*<a href="../../../internal/grpclog.html">grpclog</a>.<a href="../../../internal/grpclog.html#name-PrefixLogger">PrefixLogger</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-78">stateAggregator</a> <i>*<a href="weightedtarget/weightedaggregator.html">weightedaggregator</a>.<a href="weightedtarget/weightedaggregator.html#name-Aggregator">Aggregator</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-80">targets</a> <i>map[<a href="../../../../../builtin.html#name-string">string</a>]<a href="#name-Target">Target</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="weightedTargetBalancer-fold-methods"><label for="weightedTargetBalancer-fold-methods">Methods (<i>total 5, all are exported</i>)</label><span id='weightedTargetBalancer-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-171">Close</a>()</span></span><span>
			<span class="nodocs">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-176">ExitIdle</a>()</span></span><span>
			<span class="nodocs">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-163">ResolverError</a>(err <a href="../../../../../builtin.html#name-error">error</a>)</span></span><span>
			<input type='checkbox' class="fold" id="weightedTargetBalancer-fold-method-UpdateClientConnState"><label for="weightedTargetBalancer-fold-method-UpdateClientConnState">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-86">UpdateClientConnState</a>(s <a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-ClientConnState">ClientConnState</a>) <a href="../../../../../builtin.html#name-error">error</a></label><span id='weightedTargetBalancer-fold-method-UpdateClientConnState-docs' class="fold-docs">
				UpdateClientConnState takes the new targets in balancer group,
				creates/deletes sub-balancers and sends them update. addresses are split into
				groups based on hierarchy path.
</span></span><span>
			<span class="nodocs">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-167">UpdateSubConnState</a>(sc <a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-SubConn">SubConn</a>, state <a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-SubConnState">SubConnState</a>)</span></span></span>
		<input type='checkbox' class="fold" id="weightedTargetBalancer-fold-impls"><label for="weightedTargetBalancer-fold-impls">Implements (<i>at least 2, both are exported</i>)</label><span id='weightedTargetBalancer-fold-impls-items' class="fold-items"><span>
			*T : google.golang.org/grpc/balancer.<a href="../../../balancer.html#name-Balancer">Balancer</a></span><span>
			*T : google.golang.org/grpc/balancer.<a href="../../../balancer.html#name-ExitIdler">ExitIdler</a></span></span>
		<input type='checkbox' class="fold" id="weightedTargetBalancer-fold-params"><label for="weightedTargetBalancer-fold-params">As Inputs Of (<i>at least one unexported</i>)</label><span id='weightedTargetBalancer-fold-params-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="weightedTargetBalancer-showhide-outputofs"><i><label for="weightedTargetBalancer-showhide-outputofs" class="show-inline">/* at least one unexported ... */</label><label for="weightedTargetBalancer-showhide-outputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-prefixLogger">prefixLogger</a>(p *<b>weightedTargetBalancer</b>) *<a href="../../../internal/grpclog.html">internalgrpclog</a>.<a href="../../../internal/grpclog.html#name-PrefixLogger">PrefixLogger</a></i></span></span>

</span></div></div>
<div id="exported-functions"><span class="title">Package-Level Functions<span class="title-stat"><i> (total 3, none are exported)</i></span></span>

	<input type='checkbox' class="showhide" id="unexported-functions-showhide"><i><label for="unexported-functions-showhide" class="show-inline">/* 3 unexporteds ... */</label><label for="unexported-functions-showhide" class="hide-inline">/* 3 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-init"><i>	<span class="nodocs"> func <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-44">init</a>()</span></i></div><div class="anchor value-res hidden" id="name-parseConfig"><i>	<span class="nodocs"> func <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget_config.go.html#line-43">parseConfig</a>(c <a href="../../../../../encoding/json.html">json</a>.<a href="../../../../../encoding/json.html#name-RawMessage">RawMessage</a>) (*<a href="#name-LBConfig">LBConfig</a>, <a href="../../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-prefixLogger"><i>	<span class="nodocs"> func <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/logging.go.html#line-32">prefixLogger</a>(p *<a href="#name-weightedTargetBalancer">weightedTargetBalancer</a>) *<a href="../../../internal/grpclog.html">internalgrpclog</a>.<a href="../../../internal/grpclog.html#name-PrefixLogger">PrefixLogger</a></span></i></div></div>
<div id="exported-variables"><span class="title">Package-Level Variables<span class="title-stat"><i> (total 2, in which 1 are exported)</i></span></span>

<div class="anchor value-res" id="name-NewRandomWRR">	<input type='checkbox' class="fold" id="NewRandomWRR-fold-content"><label for="NewRandomWRR-fold-content">  var <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-42">NewRandomWRR</a> func() <a href="../../../internal/wrr.html">wrr</a>.<a href="../../../internal/wrr.html#name-WRR">WRR</a></label><span id='NewRandomWRR-fold-content-docs' class="fold-docs">
		NewRandomWRR is the WRR constructor used to pick sub-pickers from
		sub-balancers. It's to be modified in tests.

</span></div>	<input type='checkbox' class="showhide" id="unexported-variables-showhide"><i><label for="unexported-variables-showhide" class="show-inline">/* one unexported ... */</label><label for="unexported-variables-showhide" class="hide-inline">/* one unexported: */</label></i><div class="anchor value-res hidden" id="name-logger"><i>	<span class="nodocs">  var <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/logging.go.html#line-30">logger</a> <a href="../../../grpclog.html">grpclog</a>.<a href="../../../grpclog.html#name-DepthLoggerV2">DepthLoggerV2</a></span></i></div></div>
<div id="exported-constants"><span class="title">Package-Level Constants<span class="title-stat"><i> (total 2, in which 1 are exported)</i></span></span>

<div class="anchor value-res" id="name-Name">	<input type='checkbox' class="fold" id="Name-fold-content"><label for="Name-fold-content">const <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/weightedtarget.go.html#line-38">Name</a> = "weighted_target_experimental"</label><span id='Name-fold-content-docs' class="fold-docs">
		Name is the name of the weighted_target balancer.

</span></div>	<input type='checkbox' class="showhide" id="unexported-constants-showhide"><i><label for="unexported-constants-showhide" class="show-inline">/* one unexported ... */</label><label for="unexported-constants-showhide" class="hide-inline">/* one unexported: */</label></i><div class="anchor value-res hidden" id="name-prefix"><i>	<span class="nodocs">const <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/weightedtarget/logging.go.html#line-28">prefix</a> = "[weighted-target-lb %p] "</span></i></div></div></code></pre><pre id="footer">
<table><tr><td><img src="../../../../../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.3.6</i>. (GOOS=darwin GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>