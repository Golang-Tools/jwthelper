<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Package: google.golang.org/grpc/xds/internal/balancer/ringhash</title>
<link href="../../../../../../css/light-v0.3.6.css" rel="stylesheet">
<script src="../../../../../../jvs/golds-v0.3.6.js"></script>
<body onload="onPageLoad()"><div>

<pre id="package-details"><code><span style="font-size:xx-large;">package <b>ringhash</b></span>

<span class="title">Import Path</span>
	<a href="../../../../../../index.html#pkg-google.golang.org/grpc/xds/internal/balancer/ringhash">google.golang.org/grpc/xds/internal/balancer/ringhash</a><i> (on <a href="https://pkg.go.dev/google.golang.org/grpc/xds/internal/balancer/ringhash" target="_blank">go.dev</a>)</i>

<span class="title">Dependency Relation</span>
	imports <a href="../../../../../../dep/google.golang.org/grpc/xds/internal/balancer/ringhash.html">20 packages</a>, and imported by <a href="../../../../../../dep/google.golang.org/grpc/xds/internal/balancer/ringhash.html#imported-by">3 packages</a>

<div id="files"><span class="title">Involved Source Files</span>

	<span class="nodocs">      <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/config.go.html">config.go</a></span>
	<span class="nodocs">      <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/logging.go.html">logging.go</a></span>
	<span class="nodocs">      <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/picker.go.html">picker.go</a></span>
	<span class="nodocs">      <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ring.go.html">ring.go</a></span>
	<input type='checkbox' checked class="fold" id="file-4-fold-content"><label for="file-4-fold-content">   <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#doc">#d</a> <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html">ringhash.go</a></label><span id='file-4-fold-content-items' class="fold-items">
		Package ringhash implements the ringhash balancer.
</span>
	<span class="nodocs">      <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/util.go.html">util.go</a></span></div>
<div id="exported-types"><span class="title">Package-Level Type Names<span class="title-stat"><i> (total 11, in which 1 are exported)</i></span></span>

<div id="exported-types-buttons" class="js-on">	/* sort exporteds by: <label id="sort-types-by-alphabet" class="button">alphabet</label> | <label id="sort-types-by-popularity" class="button">popularity</label> */</div><div class="anchor type-res" id="name-LBConfig" data-popularity="175">	<input type='checkbox' class="fold" id="LBConfig-fold-content"><label for="LBConfig-fold-content"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/config.go.html#line-29">LBConfig</a> <i>(struct)</i></label><span id='LBConfig-fold-content-docs' class="fold-docs">
		LBConfig is the balancer config for ring_hash balancer.

		<input type='checkbox' class="fold" id="LBConfig-fold-fields"><label for="LBConfig-fold-fields">Fields (<i>total 3, all are exported</i>)</label><span id='LBConfig-fold-fields-items' class="fold-items"><span>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/config.go.html#line-30">LoadBalancingConfig</a> <i><a href="../../../serviceconfig.html">serviceconfig</a>.<a href="../../../serviceconfig.html#name-LoadBalancingConfig">LoadBalancingConfig</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/config.go.html#line-33">MaxRingSize</a> <i><a href="../../../../../builtin.html#name-uint64">uint64</a></i></span></span><span>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/config.go.html#line-32">MinRingSize</a> <i><a href="../../../../../builtin.html#name-uint64">uint64</a></i></span></span></span>
		<input type='checkbox' class="fold" id="LBConfig-fold-methods"><label for="LBConfig-fold-methods">Methods (<i>only one, which is unexported</i>)</label><span id='LBConfig-fold-methods-items' class="fold-items">
			<input type='checkbox' class="showhide" id="LBConfig-showhide-methods"><i><label for="LBConfig-showhide-methods" class="show-inline">/* one unexported ... */</label><label for="LBConfig-showhide-methods" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<span class="nodocs">( T) <a href="../../../../../../src/google.golang.org/grpc/serviceconfig/serviceconfig.go.html#line-36">isLoadBalancingConfig</a>()</span></i></span></span>
		<input type='checkbox' class="fold" id="LBConfig-fold-impls"><label for="LBConfig-fold-impls">Implements (<i>at least one exported</i>)</label><span id='LBConfig-fold-impls-items' class="fold-items"><span>
			 T : google.golang.org/grpc/serviceconfig.<a href="../../../serviceconfig.html#name-LoadBalancingConfig">LoadBalancingConfig</a></span></span>
		<input type='checkbox' class="fold" id="LBConfig-fold-results"><label for="LBConfig-fold-results">As Outputs Of (<i>at least one unexported</i>)</label><span id='LBConfig-fold-results-items' class="fold-items">
			<input type='checkbox' class="showhide" id="LBConfig-showhide-inputofs"><i><label for="LBConfig-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="LBConfig-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-parseConfig">parseConfig</a>(c <a href="../../../../../encoding/json.html">json</a>.<a href="../../../../../encoding/json.html#name-RawMessage">RawMessage</a>) (*<b>LBConfig</b>, <a href="../../../../../builtin.html#name-error">error</a>)</i></span></span>

</span></div></div><div>	<input type='checkbox' class="showhide" id="unexported-typenames-showhide"><i><label for="unexported-typenames-showhide" class="show-inline">/* 10 unexporteds ... */</label><label for="unexported-typenames-showhide" class="hide-inline">/* 10 unexporteds: */</label></i><div class="anchor type-res hidden" id="name-bb" data-popularity="250">	<input type='checkbox' class="fold" id="bb-fold-content"><label for="bb-fold-content"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-45">bb</a> <i>(struct)</i></label><span id='bb-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="bb-fold-methods"><label for="bb-fold-methods">Methods (<i>total 3, all are exported</i>)</label><span id='bb-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">( T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-47">Build</a>(cc <a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-ClientConn">ClientConn</a>, bOpts <a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-BuildOptions">BuildOptions</a>) <a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-Balancer">Balancer</a></span></span><span>
			<span class="nodocs">( T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-59">Name</a>() <a href="../../../../../builtin.html#name-string">string</a></span></span><span>
			<span class="nodocs">( T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-63">ParseConfig</a>(c <a href="../../../../../encoding/json.html">json</a>.<a href="../../../../../encoding/json.html#name-RawMessage">RawMessage</a>) (<a href="../../../serviceconfig.html">serviceconfig</a>.<a href="../../../serviceconfig.html#name-LoadBalancingConfig">LoadBalancingConfig</a>, <a href="../../../../../builtin.html#name-error">error</a>)</span></span></span>
		<input type='checkbox' class="fold" id="bb-fold-impls"><label for="bb-fold-impls">Implements (<i>at least 2, both are exported</i>)</label><span id='bb-fold-impls-items' class="fold-items"><span>
			 T : google.golang.org/grpc/balancer.<a href="../../../balancer.html#name-Builder">Builder</a></span><span>
			 T : google.golang.org/grpc/balancer.<a href="../../../balancer.html#name-ConfigParser">ConfigParser</a></span></span>

</span></div><div class="anchor type-res hidden" id="name-clusterKey" data-popularity="0">	<span class="nodocs"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/util.go.html#line-23">clusterKey</a> <i>(struct)</i></span></div><div class="anchor type-res hidden" id="name-connectivityStateEvaluator" data-popularity="50">	<input type='checkbox' class="fold" id="connectivityStateEvaluator-fold-content"><label for="connectivityStateEvaluator-fold-content"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-397">connectivityStateEvaluator</a> <i>(struct)</i></label><span id='connectivityStateEvaluator-fold-content-docs' class="fold-docs">
		connectivityStateEvaluator takes the connectivity states of multiple SubConns
		and returns one aggregated connectivity state.

		It's not thread safe.

		<input type='checkbox' class="fold" id="connectivityStateEvaluator-fold-fields"><label for="connectivityStateEvaluator-fold-fields">Fields (<i>only one, which is unexported</i>)</label><span id='connectivityStateEvaluator-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="connectivityStateEvaluator-showhide-fields"><i><label for="connectivityStateEvaluator-showhide-fields" class="show-inline">/* one unexported ... */</label><label for="connectivityStateEvaluator-showhide-fields" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-398">nums</a> <i>[5]<a href="../../../../../builtin.html#name-uint64">uint64</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="connectivityStateEvaluator-fold-methods"><label for="connectivityStateEvaluator-fold-methods">Methods (<i>only one, which is unexported</i>)</label><span id='connectivityStateEvaluator-fold-methods-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="connectivityStateEvaluator-showhide-methods"><i><label for="connectivityStateEvaluator-showhide-methods" class="show-inline">/* one unexported ... */</label><label for="connectivityStateEvaluator-showhide-methods" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="connectivityStateEvaluator-fold-method-recordTransition"><label for="connectivityStateEvaluator-fold-method-recordTransition">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-414">recordTransition</a>(oldState, newState <a href="../../../connectivity.html">connectivity</a>.<a href="../../../connectivity.html#name-State">State</a>) <a href="../../../connectivity.html">connectivity</a>.<a href="../../../connectivity.html#name-State">State</a></label><span id='connectivityStateEvaluator-fold-method-recordTransition-docs' class="fold-docs">
				recordTransition records state change happening in subConn and based on that
				it evaluates what aggregated state should be.

				- If there is at least one subchannel in READY state, report READY.
				- If there are 2 or more subchannels in TRANSIENT_FAILURE state, report TRANSIENT_FAILURE.
				- If there is at least one subchannel in CONNECTING state, report CONNECTING.
				- If there is at least one subchannel in Idle state, report Idle.
				- Otherwise, report TRANSIENT_FAILURE.

				Note that if there are 1 connecting, 2 transient failure, the overall state
				is transient failure. This is because the second transient failure is a
				fallback of the first failing SubConn, and we want to report transient
				failure to failover to the lower priority.
</span></i></span></span>

</span></div><div class="anchor type-res hidden" id="name-handleRICSResult" data-popularity="0">	<input type='checkbox' class="fold" id="handleRICSResult-fold-content"><label for="handleRICSResult-fold-content"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/picker.go.html#line-44">handleRICSResult</a> <i>(struct)</i></label><span id='handleRICSResult-fold-content-docs' class="fold-docs">
		handleRICSResult is the return type of handleRICS. It's needed to wrap the
		returned error from Pick() in a struct. With this, if the return values are
		`balancer.PickResult, error, bool`, linter complains because error is not the
		last return value.

		<input type='checkbox' class="fold" id="handleRICSResult-fold-fields"><label for="handleRICSResult-fold-fields">Fields (<i>total 2, neither is exported</i>)</label><span id='handleRICSResult-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="handleRICSResult-showhide-fields"><i><label for="handleRICSResult-showhide-fields" class="show-inline">/* 2 unexporteds ... */</label><label for="handleRICSResult-showhide-fields" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/picker.go.html#line-46">err</a> <i><a href="../../../../../builtin.html#name-error">error</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/picker.go.html#line-45">pr</a> <i><a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-PickResult">PickResult</a></i></span></i></span></span>

</span></div><div class="anchor type-res hidden" id="name-picker" data-popularity="275">	<input type='checkbox' class="fold" id="picker-fold-content"><label for="picker-fold-content"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/picker.go.html#line-31">picker</a> <i>(struct)</i></label><span id='picker-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="picker-fold-fields"><label for="picker-fold-fields">Fields (<i>total 2, neither is exported</i>)</label><span id='picker-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="picker-showhide-fields"><i><label for="picker-showhide-fields" class="show-inline">/* 2 unexporteds ... */</label><label for="picker-showhide-fields" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/picker.go.html#line-33">logger</a> <i>*<a href="../../../internal/grpclog.html">grpclog</a>.<a href="../../../internal/grpclog.html#name-PrefixLogger">PrefixLogger</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/picker.go.html#line-32">ring</a> <i>*<a href="#name-ring">ring</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="picker-fold-methods"><label for="picker-fold-methods">Methods (<i>total 3, in which 1 are exported</i>)</label><span id='picker-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/picker.go.html#line-81">Pick</a>(info <a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-PickInfo">PickInfo</a>) (<a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-PickResult">PickResult</a>, <a href="../../../../../builtin.html#name-error">error</a>)</span></span>
			<input type='checkbox' checked class="showhide" id="picker-showhide-methods"><i><label for="picker-showhide-methods" class="show-inline">/* 2 unexporteds ... */</label><label for="picker-showhide-methods" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="picker-fold-method-handleRICS"><label for="picker-fold-method-handleRICS">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/picker.go.html#line-56">handleRICS</a>(e *<a href="#name-ringEntry">ringEntry</a>) (<a href="#name-handleRICSResult">handleRICSResult</a>, <a href="../../../../../builtin.html#name-bool">bool</a>)</label><span id='picker-fold-method-handleRICS-docs' class="fold-docs">
				handleRICS generates pick result if the entry is in Ready, Idle, Connecting
				or Shutdown. TransientFailure will be handled specifically after this
				function returns.

				The first return value indicates if the state is in Ready, Idle, Connecting
				or Shutdown. If it's true, the PickResult and error should be returned from
				Pick() as is.
</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/picker.go.html#line-90">handleTransientFailure</a>(e *<a href="#name-ringEntry">ringEntry</a>) (<a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-PickResult">PickResult</a>, <a href="../../../../../builtin.html#name-error">error</a>)</span></i></span></span>
		<input type='checkbox' class="fold" id="picker-fold-impls"><label for="picker-fold-impls">Implements (<i>at least one exported</i>)</label><span id='picker-fold-impls-items' class="fold-items"><span>
			*T : google.golang.org/grpc/balancer.<a href="../../../balancer.html#name-Picker">Picker</a></span></span>
		<input type='checkbox' class="fold" id="picker-fold-results"><label for="picker-fold-results">As Outputs Of (<i>at least one unexported</i>)</label><span id='picker-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="picker-showhide-inputofs"><i><label for="picker-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="picker-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-newPicker">newPicker</a>(ring *<a href="#name-ring">ring</a>, logger *<a href="../../../internal/grpclog.html">grpclog</a>.<a href="../../../internal/grpclog.html#name-PrefixLogger">PrefixLogger</a>) *<b>picker</b></i></span></span>

</span></div><div class="anchor type-res hidden" id="name-ring" data-popularity="245">	<input type='checkbox' class="fold" id="ring-fold-content"><label for="ring-fold-content"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ring.go.html#line-31">ring</a> <i>(struct)</i></label><span id='ring-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="ring-fold-fields"><label for="ring-fold-fields">Fields (<i>only one, which is unexported</i>)</label><span id='ring-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="ring-showhide-fields"><i><label for="ring-showhide-fields" class="show-inline">/* one unexported ... */</label><label for="ring-showhide-fields" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ring.go.html#line-32">items</a> <i>[]*<a href="#name-ringEntry">ringEntry</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="ring-fold-methods"><label for="ring-fold-methods">Methods (<i>total 2, neither is exported</i>)</label><span id='ring-fold-methods-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="ring-showhide-methods"><i><label for="ring-showhide-methods" class="show-inline">/* 2 unexporteds ... */</label><label for="ring-showhide-methods" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="ring-fold-method-next"><label for="ring-fold-method-next">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ring.go.html#line-161">next</a>(e *<a href="#name-ringEntry">ringEntry</a>) *<a href="#name-ringEntry">ringEntry</a></label><span id='ring-fold-method-next-docs' class="fold-docs">
				next returns the next entry.
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="ring-fold-method-pick"><label for="ring-fold-method-pick">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ring.go.html#line-150">pick</a>(h <a href="../../../../../builtin.html#name-uint64">uint64</a>) *<a href="#name-ringEntry">ringEntry</a></label><span id='ring-fold-method-pick-docs' class="fold-docs">
				pick does a binary search. It returns the item with smallest index i that
				r.items[i].hash &gt;= h.
</span></i></span></span>
		<input type='checkbox' class="fold" id="ring-fold-results"><label for="ring-fold-results">As Outputs Of (<i>at least one unexported</i>)</label><span id='ring-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="ring-showhide-inputofs"><i><label for="ring-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="ring-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-newRing">newRing</a>(subConns map[<a href="../../../resolver.html">resolver</a>.<a href="../../../resolver.html#name-Address">Address</a>]*<a href="#name-subConn">subConn</a>, minRingSize, maxRingSize <a href="../../../../../builtin.html#name-uint64">uint64</a>) (*<b>ring</b>, <a href="../../../../../builtin.html#name-error">error</a>)</i></span></span>
		<input type='checkbox' class="fold" id="ring-fold-params"><label for="ring-fold-params">As Inputs Of (<i>at least 2, neither is exported</i>)</label><span id='ring-fold-params-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="ring-showhide-outputofs"><i><label for="ring-showhide-outputofs" class="show-inline">/* 2+ unexporteds ... */</label><label for="ring-showhide-outputofs" class="hide-inline">/* 2+ unexporteds: */</label></i><span class="hidden"><i>
			func <a href="#name-newPicker">newPicker</a>(ring *<b>ring</b>, logger *<a href="../../../internal/grpclog.html">grpclog</a>.<a href="../../../internal/grpclog.html#name-PrefixLogger">PrefixLogger</a>) *<a href="#name-picker">picker</a></i></span><span class="hidden"><i>
			func <a href="#name-nextSkippingDuplicates">nextSkippingDuplicates</a>(ring *<b>ring</b>, entry *<a href="#name-ringEntry">ringEntry</a>) *<a href="#name-ringEntry">ringEntry</a></i></span></span>

</span></div><div class="anchor type-res hidden" id="name-ringEntry" data-popularity="110">	<input type='checkbox' class="fold" id="ringEntry-fold-content"><label for="ringEntry-fold-content"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ring.go.html#line-40">ringEntry</a> <i>(struct)</i></label><span id='ringEntry-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="ringEntry-fold-fields"><label for="ringEntry-fold-fields">Fields (<i>total 3, none are exported</i>)</label><span id='ringEntry-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="ringEntry-showhide-fields"><i><label for="ringEntry-showhide-fields" class="show-inline">/* 3 unexporteds ... */</label><label for="ringEntry-showhide-fields" class="hide-inline">/* 3 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ring.go.html#line-42">hash</a> <i><a href="../../../../../builtin.html#name-uint64">uint64</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ring.go.html#line-41">idx</a> <i><a href="../../../../../builtin.html#name-int">int</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ring.go.html#line-43">sc</a> <i>*<a href="#name-subConn">subConn</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="ringEntry-fold-results"><label for="ringEntry-fold-results">As Outputs Of (<i>at least one unexported</i>)</label><span id='ringEntry-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="ringEntry-showhide-inputofs"><i><label for="ringEntry-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="ringEntry-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-nextSkippingDuplicates">nextSkippingDuplicates</a>(ring *<a href="#name-ring">ring</a>, entry *<b>ringEntry</b>) *<b>ringEntry</b></i></span></span>
		<input type='checkbox' class="fold" id="ringEntry-fold-params"><label for="ringEntry-fold-params">As Inputs Of (<i>at least one unexported</i>)</label><span id='ringEntry-fold-params-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="ringEntry-showhide-outputofs"><i><label for="ringEntry-showhide-outputofs" class="show-inline">/* at least one unexported ... */</label><label for="ringEntry-showhide-outputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-nextSkippingDuplicates">nextSkippingDuplicates</a>(ring *<a href="#name-ring">ring</a>, entry *<b>ringEntry</b>) *<b>ringEntry</b></i></span></span>

</span></div><div class="anchor type-res hidden" id="name-ringhashBalancer" data-popularity="435">	<input type='checkbox' class="fold" id="ringhashBalancer-fold-content"><label for="ringhashBalancer-fold-content"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-161">ringhashBalancer</a> <i>(struct)</i></label><span id='ringhashBalancer-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="ringhashBalancer-fold-fields"><label for="ringhashBalancer-fold-fields">Fields (<i>total 11, none are exported</i>)</label><span id='ringhashBalancer-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="ringhashBalancer-showhide-fields"><i><label for="ringhashBalancer-showhide-fields" class="show-inline">/* 11 unexporteds ... */</label><label for="ringhashBalancer-showhide-fields" class="hide-inline">/* 11 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-162">cc</a> <i><a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-ClientConn">ClientConn</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-165">config</a> <i>*<a href="#name-LBConfig">LBConfig</a></i></span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="ringhashBalancer-fold-field-connErr"><label for="ringhashBalancer-fold-field-connErr"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-179">connErr</a> <i><a href="../../../../../builtin.html#name-error">error</a></i></label><span id='ringhashBalancer-fold-field-connErr-docs' class="fold-docs">
				// the last connection error; cleared upon leaving TransientFailure
</span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-175">csEvltr</a> <i>*<a href="#name-connectivityStateEvaluator">connectivityStateEvaluator</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-163">logger</a> <i>*<a href="../../../internal/grpclog.html">grpclog</a>.<a href="../../../internal/grpclog.html#name-PrefixLogger">PrefixLogger</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-174">picker</a> <i><a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-Picker">Picker</a></i></span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="ringhashBalancer-fold-field-resolverErr"><label for="ringhashBalancer-fold-field-resolverErr"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-178">resolverErr</a> <i><a href="../../../../../builtin.html#name-error">error</a></i></label><span id='ringhashBalancer-fold-field-resolverErr-docs' class="fold-docs">
				// the last error reported by the resolver; cleared on successful resolution
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="ringhashBalancer-fold-field-ring"><label for="ringhashBalancer-fold-field-ring"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-173">ring</a> <i>*<a href="#name-ring">ring</a></i></label><span id='ringhashBalancer-fold-field-ring-docs' class="fold-docs">
				ring is always in sync with subConns. When subConns change, a new ring is
				generated. Note that address weights updates (they are keys in the
				subConns map) also regenerates the ring.
</span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-168">scStates</a> <i>map[<a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-SubConn">SubConn</a>]*<a href="#name-subConn">subConn</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-176">state</a> <i><a href="../../../connectivity.html">connectivity</a>.<a href="../../../connectivity.html#name-State">State</a></i></span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="ringhashBalancer-fold-field-subConns"><label for="ringhashBalancer-fold-field-subConns"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-167">subConns</a> <i>map[<a href="../../../resolver.html">resolver</a>.<a href="../../../resolver.html#name-Address">Address</a>]*<a href="#name-subConn">subConn</a></i></label><span id='ringhashBalancer-fold-field-subConns-docs' class="fold-docs">
				// `attributes` is stripped from the keys of this map (the addresses)
</span></i></span></span>
		<input type='checkbox' class="fold" id="ringhashBalancer-fold-methods"><label for="ringhashBalancer-fold-methods">Methods (<i>total 7, in which 4 are exported</i>)</label><span id='ringhashBalancer-fold-methods-items' class="fold-items"><span>
			<span class="nodocs">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-391">Close</a>()</span></span><span>
			<span class="nodocs">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-288">ResolverError</a>(err <a href="../../../../../builtin.html#name-error">error</a>)</span></span><span>
			<span class="nodocs">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-252">UpdateClientConnState</a>(s <a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-ClientConnState">ClientConnState</a>) <a href="../../../../../builtin.html#name-error">error</a></span></span><span>
			<input type='checkbox' class="fold" id="ringhashBalancer-fold-method-UpdateSubConnState"><label for="ringhashBalancer-fold-method-UpdateSubConnState">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-316">UpdateSubConnState</a>(sc <a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-SubConn">SubConn</a>, state <a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-SubConnState">SubConnState</a>)</label><span id='ringhashBalancer-fold-method-UpdateSubConnState-docs' class="fold-docs">
				UpdateSubConnState updates the per-SubConn state stored in the ring, and also
				the aggregated state.

				It triggers an update to cc when:
				- the new state is TransientFailure, to update the error message
				  - it's possible that this is a noop, but sending an extra update is easier
				  than comparing errors
				- the aggregated state is changed
				  - the same picker will be sent again, but this update may trigger a re-pick
				  for some RPCs.
</span></span>
			<input type='checkbox' checked class="showhide" id="ringhashBalancer-showhide-methods"><i><label for="ringhashBalancer-showhide-methods" class="show-inline">/* 3 unexporteds ... */</label><label for="ringhashBalancer-showhide-methods" class="hide-inline">/* 3 unexporteds: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="ringhashBalancer-fold-method-mergeErrors"><label for="ringhashBalancer-fold-method-mergeErrors">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-371">mergeErrors</a>() <a href="../../../../../builtin.html#name-error">error</a></label><span id='ringhashBalancer-fold-method-mergeErrors-docs' class="fold-docs">
				mergeErrors builds an error from the last connection error and the last
				resolver error.  Must only be called if b.state is TransientFailure.
</span></i></span><span class="hidden"><i>
			<span class="nodocs">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-383">regeneratePicker</a>()</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="ringhashBalancer-fold-method-updateAddresses"><label for="ringhashBalancer-fold-method-updateAddresses">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-193">updateAddresses</a>(addrs []<a href="../../../resolver.html">resolver</a>.<a href="../../../resolver.html#name-Address">Address</a>) <a href="../../../../../builtin.html#name-bool">bool</a></label><span id='ringhashBalancer-fold-method-updateAddresses-docs' class="fold-docs">
				updateAddresses creates new SubConns and removes SubConns, based on the
				address update.

				The return value is whether the new address list is different from the
				previous. True if
				- an address was added
				- an address was removed
				- an address's weight was updated

				Note that this function doesn't trigger SubConn connecting, so all the new
				SubConn states are Idle.
</span></i></span></span>
		<input type='checkbox' class="fold" id="ringhashBalancer-fold-impls"><label for="ringhashBalancer-fold-impls">Implements (<i>at least one exported</i>)</label><span id='ringhashBalancer-fold-impls-items' class="fold-items"><span>
			*T : google.golang.org/grpc/balancer.<a href="../../../balancer.html#name-Balancer">Balancer</a></span></span>
		<input type='checkbox' class="fold" id="ringhashBalancer-fold-params"><label for="ringhashBalancer-fold-params">As Inputs Of (<i>at least one unexported</i>)</label><span id='ringhashBalancer-fold-params-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="ringhashBalancer-showhide-outputofs"><i><label for="ringhashBalancer-showhide-outputofs" class="show-inline">/* at least one unexported ... */</label><label for="ringhashBalancer-showhide-outputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-prefixLogger">prefixLogger</a>(p *<b>ringhashBalancer</b>) *<a href="../../../internal/grpclog.html">internalgrpclog</a>.<a href="../../../internal/grpclog.html#name-PrefixLogger">PrefixLogger</a></i></span></span>

</span></div><div class="anchor type-res hidden" id="name-subConn" data-popularity="220">	<input type='checkbox' class="fold" id="subConn-fold-content"><label for="subConn-fold-content"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-67">subConn</a> <i>(struct)</i></label><span id='subConn-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="subConn-fold-fields"><label for="subConn-fold-fields">Fields (<i>total 6, none are exported</i>)</label><span id='subConn-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="subConn-showhide-fields"><i><label for="subConn-showhide-fields" class="show-inline">/* 6 unexporteds ... */</label><label for="subConn-showhide-fields" class="hide-inline">/* 6 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-68">addr</a> <i><a href="../../../../../builtin.html#name-string">string</a></i></span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="subConn-fold-field-connectQueued"><label for="subConn-fold-field-connectQueued"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-100">connectQueued</a> <i><a href="../../../../../builtin.html#name-bool">bool</a></i></label><span id='subConn-fold-field-connectQueued-docs' class="fold-docs">
				connectQueued is true if a Connect() was queued for this SubConn while
				it's not in Idle (most likely was in TransientFailure). A Connect() will
				be triggered on this SubConn when it turns Idle.

				When connectivity state is updated to Idle for this SubConn, if
				connectQueued is true, Connect() will be called on the SubConn.
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="subConn-fold-field-failing"><label for="subConn-fold-field-failing"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-93">failing</a> <i><a href="../../../../../builtin.html#name-bool">bool</a></i></label><span id='subConn-fold-field-failing-docs' class="fold-docs">
				failing is whether this SubConn is in a failing state. A subConn is
				considered to be in a failing state if it was previously in
				TransientFailure.

				This affects the effective connectivity state of this SubConn, e.g.
				- if the actual state is Idle or Connecting, but this SubConn is failing,
				the effective state is TransientFailure.

				This is used in pick(). E.g. if a subConn is Idle, but has failing as
				true, pick() will
				- consider this SubConn as TransientFailure, and check the state of the
				next SubConn.
				- trigger Connect() (note that normally a SubConn in real
				TransientFailure cannot Connect())

				A subConn starts in non-failing (failing is false). A transition to
				TransientFailure sets failing to true (and it stays true). A transition
				to Ready sets failing to false.
</span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-71">mu</a> <i><a href="../../../../../sync.html">sync</a>.<a href="../../../../../sync.html#name-RWMutex">RWMutex</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-69">sc</a> <i><a href="../../../balancer.html">balancer</a>.<a href="../../../balancer.html#name-SubConn">SubConn</a></i></span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="subConn-fold-field-state"><label for="subConn-fold-field-state"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-74">state</a> <i><a href="../../../connectivity.html">connectivity</a>.<a href="../../../connectivity.html#name-State">State</a></i></label><span id='subConn-fold-field-state-docs' class="fold-docs">
				This is the actual state of this SubConn (as updated by the ClientConn).
				The effective state can be different, see comment of attemptedToConnect.
</span></i></span></span>
		<input type='checkbox' class="fold" id="subConn-fold-methods"><label for="subConn-fold-methods">Methods (<i>total 3, none are exported</i>)</label><span id='subConn-fold-methods-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="subConn-showhide-methods"><i><label for="subConn-showhide-methods" class="show-inline">/* 3 unexporteds ... */</label><label for="subConn-showhide-methods" class="hide-inline">/* 3 unexporteds: */</label></i><span class="hidden"><i>
			<input type='checkbox' class="fold" id="subConn-fold-method-effectiveState"><label for="subConn-fold-method-effectiveState">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-137">effectiveState</a>() <a href="../../../connectivity.html">connectivity</a>.<a href="../../../connectivity.html#name-State">State</a></label><span id='subConn-fold-method-effectiveState-docs' class="fold-docs">
				effectiveState returns the effective state of this SubConn. It can be
				different from the actual state, e.g. Idle while the subConn is failing is
				considered TransientFailure. Read comment of field failing for other cases.
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="subConn-fold-method-queueConnect"><label for="subConn-fold-method-queueConnect">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-149">queueConnect</a>()</label><span id='subConn-fold-method-queueConnect-docs' class="fold-docs">
				queueConnect sets a boolean so that when the SubConn state changes to Idle,
				it's Connect() will be triggered. If the SubConn state is already Idle, it
				will just call Connect().
</span></i></span><span class="hidden"><i>
			<input type='checkbox' class="fold" id="subConn-fold-method-setState"><label for="subConn-fold-method-setState">(*T) <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-107">setState</a>(s <a href="../../../connectivity.html">connectivity</a>.<a href="../../../connectivity.html#name-State">State</a>)</label><span id='subConn-fold-method-setState-docs' class="fold-docs">
				setState updates the state of this SubConn.

				It also handles the queued Connect(). If the new state is Idle, and a
				Connect() was queued, this SubConn will be triggered to Connect().
</span></i></span></span>
		<input type='checkbox' class="fold" id="subConn-fold-params"><label for="subConn-fold-params">As Inputs Of (<i>at least 2, neither is exported</i>)</label><span id='subConn-fold-params-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="subConn-showhide-outputofs"><i><label for="subConn-showhide-outputofs" class="show-inline">/* 2+ unexporteds ... */</label><label for="subConn-showhide-outputofs" class="hide-inline">/* 2+ unexporteds: */</label></i><span class="hidden"><i>
			func <a href="#name-newRing">newRing</a>(subConns map[<a href="../../../resolver.html">resolver</a>.<a href="../../../resolver.html#name-Address">Address</a>]*<b>subConn</b>, minRingSize, maxRingSize <a href="../../../../../builtin.html#name-uint64">uint64</a>) (*<a href="#name-ring">ring</a>, <a href="../../../../../builtin.html#name-error">error</a>)</i></span><span class="hidden"><i>
			func <a href="#name-normalizeWeights">normalizeWeights</a>(subConns map[<a href="../../../resolver.html">resolver</a>.<a href="../../../resolver.html#name-Address">Address</a>]*<b>subConn</b>) (_ []<a href="#name-subConnWithWeight">subConnWithWeight</a>, min <a href="../../../../../builtin.html#name-float64">float64</a>, _ <a href="../../../../../builtin.html#name-error">error</a>)</i></span></span>

</span></div><div class="anchor type-res hidden" id="name-subConnWithWeight" data-popularity="75">	<input type='checkbox' class="fold" id="subConnWithWeight-fold-content"><label for="subConnWithWeight-fold-content"> type <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ring.go.html#line-35">subConnWithWeight</a> <i>(struct)</i></label><span id='subConnWithWeight-fold-content-docs' class="fold-docs">

		<input type='checkbox' class="fold" id="subConnWithWeight-fold-fields"><label for="subConnWithWeight-fold-fields">Fields (<i>total 2, neither is exported</i>)</label><span id='subConnWithWeight-fold-fields-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="subConnWithWeight-showhide-fields"><i><label for="subConnWithWeight-showhide-fields" class="show-inline">/* 2 unexporteds ... */</label><label for="subConnWithWeight-showhide-fields" class="hide-inline">/* 2 unexporteds: */</label></i><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ring.go.html#line-36">sc</a> <i>*<a href="#name-subConn">subConn</a></i></span></i></span><span class="hidden"><i>
			<span class="nodocs"><a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ring.go.html#line-37">weight</a> <i><a href="../../../../../builtin.html#name-float64">float64</a></i></span></i></span></span>
		<input type='checkbox' class="fold" id="subConnWithWeight-fold-results"><label for="subConnWithWeight-fold-results">As Outputs Of (<i>at least one unexported</i>)</label><span id='subConnWithWeight-fold-results-items' class="fold-items">
			<input type='checkbox' checked class="showhide" id="subConnWithWeight-showhide-inputofs"><i><label for="subConnWithWeight-showhide-inputofs" class="show-inline">/* at least one unexported ... */</label><label for="subConnWithWeight-showhide-inputofs" class="hide-inline">/* at least one unexported: */</label></i><span class="hidden"><i>
			func <a href="#name-normalizeWeights">normalizeWeights</a>(subConns map[<a href="../../../resolver.html">resolver</a>.<a href="../../../resolver.html#name-Address">Address</a>]*<a href="#name-subConn">subConn</a>) (_ []<b>subConnWithWeight</b>, min <a href="../../../../../builtin.html#name-float64">float64</a>, _ <a href="../../../../../builtin.html#name-error">error</a>)</i></span></span>

</span></div></div>
<div id="exported-functions"><span class="title">Package-Level Functions<span class="title-stat"><i> (total 10, in which 2 are exported)</i></span></span>

<div class="anchor value-res" id="name-GetRequestHashForTesting">	<input type='checkbox' class="fold" id="GetRequestHashForTesting-fold-content"><label for="GetRequestHashForTesting-fold-content"> func <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/util.go.html#line-32">GetRequestHashForTesting</a>(ctx <a href="../../../../../context.html">context</a>.<a href="../../../../../context.html#name-Context">Context</a>) <a href="../../../../../builtin.html#name-uint64">uint64</a></label><span id='GetRequestHashForTesting-fold-content-docs' class="fold-docs">
		GetRequestHashForTesting returns the request hash in the context; to be used
		for testing only.

</span></div><div class="anchor value-res" id="name-SetRequestHash">	<input type='checkbox' class="fold" id="SetRequestHash-fold-content"><label for="SetRequestHash-fold-content"> func <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/util.go.html#line-38">SetRequestHash</a>(ctx <a href="../../../../../context.html">context</a>.<a href="../../../../../context.html#name-Context">Context</a>, requestHash <a href="../../../../../builtin.html#name-uint64">uint64</a>) <a href="../../../../../context.html">context</a>.<a href="../../../../../context.html#name-Context">Context</a></label><span id='SetRequestHash-fold-content-docs' class="fold-docs">
		SetRequestHash adds the request hash to the context for use in Ring Hash Load
		Balancing.

</span></div>	<input type='checkbox' class="showhide" id="unexported-functions-showhide"><i><label for="unexported-functions-showhide" class="show-inline">/* 8 unexporteds ... */</label><label for="unexported-functions-showhide" class="hide-inline">/* 8 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-getRequestHash"><i>	<span class="nodocs"> func <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/util.go.html#line-25">getRequestHash</a>(ctx <a href="../../../../../context.html">context</a>.<a href="../../../../../context.html#name-Context">Context</a>) <a href="../../../../../builtin.html#name-uint64">uint64</a></span></i></div><div class="anchor value-res hidden" id="name-init"><i>	<span class="nodocs"> func <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-41">init</a>()</span></i></div><div class="anchor value-res hidden" id="name-newPicker"><i>	<span class="nodocs"> func <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/picker.go.html#line-36">newPicker</a>(ring *<a href="#name-ring">ring</a>, logger *<a href="../../../internal/grpclog.html">grpclog</a>.<a href="../../../internal/grpclog.html#name-PrefixLogger">PrefixLogger</a>) *<a href="#name-picker">picker</a></span></i></div><div class="anchor value-res hidden" id="name-newRing"><i>	<input type='checkbox' class="fold" id="newRing-fold-content"><label for="newRing-fold-content"> func <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ring.go.html#line-67">newRing</a>(subConns map[<a href="../../../resolver.html">resolver</a>.<a href="../../../resolver.html#name-Address">Address</a>]*<a href="#name-subConn">subConn</a>, minRingSize, maxRingSize <a href="../../../../../builtin.html#name-uint64">uint64</a>) (*<a href="#name-ring">ring</a>, <a href="../../../../../builtin.html#name-error">error</a>)</label><span id='newRing-fold-content-docs' class="fold-docs">
		newRing creates a ring from the subConns. The ring size is limited by the
		passed in max/min.

		ring entries will be created for each subConn, and subConn with high weight
		(specified by the address) may have multiple entries.

		For example, for subConns with weights {a:3, b:3, c:4}, a generated ring of
		size 10 could be:
		- {idx:0 hash:3689675255460411075  b}
		- {idx:1 hash:4262906501694543955  c}
		- {idx:2 hash:5712155492001633497  c}
		- {idx:3 hash:8050519350657643659  b}
		- {idx:4 hash:8723022065838381142  b}
		- {idx:5 hash:11532782514799973195 a}
		- {idx:6 hash:13157034721563383607 c}
		- {idx:7 hash:14468677667651225770 c}
		- {idx:8 hash:17336016884672388720 a}
		- {idx:9 hash:18151002094784932496 a}

		To pick from a ring, a binary search will be done for the given target hash,
		and first item with hash &gt;= given hash will be returned.

</span></i></div><div class="anchor value-res hidden" id="name-nextSkippingDuplicates"><i>	<span class="nodocs"> func <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/picker.go.html#line-146">nextSkippingDuplicates</a>(ring *<a href="#name-ring">ring</a>, entry *<a href="#name-ringEntry">ringEntry</a>) *<a href="#name-ringEntry">ringEntry</a></span></i></div><div class="anchor value-res hidden" id="name-normalizeWeights"><i>	<input type='checkbox' class="fold" id="normalizeWeights-fold-content"><label for="normalizeWeights-fold-content"> func <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ring.go.html#line-114">normalizeWeights</a>(subConns map[<a href="../../../resolver.html">resolver</a>.<a href="../../../resolver.html#name-Address">Address</a>]*<a href="#name-subConn">subConn</a>) (_ []<a href="#name-subConnWithWeight">subConnWithWeight</a>, min <a href="../../../../../builtin.html#name-float64">float64</a>, _ <a href="../../../../../builtin.html#name-error">error</a>)</label><span id='normalizeWeights-fold-content-docs' class="fold-docs">
		normalizeWeights divides all the weights by the sum, so that the total weight
		is 1.

</span></i></div><div class="anchor value-res hidden" id="name-parseConfig"><i>	<span class="nodocs"> func <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/config.go.html#line-41">parseConfig</a>(c <a href="../../../../../encoding/json.html">json</a>.<a href="../../../../../encoding/json.html#name-RawMessage">RawMessage</a>) (*<a href="#name-LBConfig">LBConfig</a>, <a href="../../../../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-prefixLogger"><i>	<span class="nodocs"> func <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/logging.go.html#line-32">prefixLogger</a>(p *<a href="#name-ringhashBalancer">ringhashBalancer</a>) *<a href="../../../internal/grpclog.html">internalgrpclog</a>.<a href="../../../internal/grpclog.html#name-PrefixLogger">PrefixLogger</a></span></i></div></div>
<div id="exported-variables"><span class="title">Package-Level Variables<span class="title-stat"><i> (only one, which is unexported)</i></span></span>

	<input type='checkbox' class="showhide" id="unexported-variables-showhide"><i><label for="unexported-variables-showhide" class="show-inline">/* one unexported ... */</label><label for="unexported-variables-showhide" class="hide-inline">/* one unexported: */</label></i><div class="anchor value-res hidden" id="name-logger"><i>	<span class="nodocs">  var <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/logging.go.html#line-30">logger</a> <a href="../../../grpclog.html">grpclog</a>.<a href="../../../grpclog.html#name-DepthLoggerV2">DepthLoggerV2</a></span></i></div></div>
<div id="exported-constants"><span class="title">Package-Level Constants<span class="title-stat"><i> (total 4, in which 1 are exported)</i></span></span>

<div class="anchor value-res" id="name-Name">	<input type='checkbox' class="fold" id="Name-fold-content"><label for="Name-fold-content">const <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/ringhash.go.html#line-39">Name</a> = "ring_hash_experimental"</label><span id='Name-fold-content-docs' class="fold-docs">
		Name is the name of the ring_hash balancer.

</span></div>	<input type='checkbox' class="showhide" id="unexported-constants-showhide"><i><label for="unexported-constants-showhide" class="show-inline">/* 3 unexporteds ... */</label><label for="unexported-constants-showhide" class="hide-inline">/* 3 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-defaultMaxSize"><i>	<span class="nodocs">const <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/config.go.html#line-38">defaultMaxSize</a> = 8388608 // 8M</span></i></div><div class="anchor value-res hidden" id="name-defaultMinSize"><i>	<span class="nodocs">const <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/config.go.html#line-37">defaultMinSize</a> = 1024</span></i></div><div class="anchor value-res hidden" id="name-prefix"><i>	<span class="nodocs">const <a href="../../../../../../src/google.golang.org/grpc/xds/internal/balancer/ringhash/logging.go.html#line-28">prefix</a> = "[ring-hash-lb %p] "</span></i></div></div></code></pre><pre id="footer">
<table><tr><td><img src="../../../../../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.3.6</i>. (GOOS=darwin GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>